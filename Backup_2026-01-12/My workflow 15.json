{"updatedAt":"2025-11-12T11:50:35.000Z","createdAt":"2025-09-18T15:12:25.964Z","id":"zv4XJ5CIvMH8G5bV","name":"My workflow 15","active":false,"isArchived":true,"nodes":[{"parameters":{"rule":{"interval":[{"field":"hours","hoursInterval":6}]}},"id":"ad4e4b09-76eb-41c9-918d-5c94f878ccf2","name":"Schedule Trigger","type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.1,"position":[-272,176]},{"parameters":{"url":"https://newsapi.org/v2/everything","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendQuery":true,"queryParameters":{"parameters":[{"name":"q","value":"artificial intelligence OR machine learning OR AI OR OpenAI OR Google AI OR ChatGPT OR GPT OR LLM OR \"large language model\""},{"name":"sortBy","value":"publishedAt"},{"name":"language","value":"en"},{"name":"pageSize","value":"50"},{"name":"from","value":"{{ $now.minus({hours: 6}).toFormat('yyyy-MM-dd') }}"}]},"options":{}},"id":"fcab014f-4bcd-4dc9-97f1-1249dabead87","name":"NewsAPI Source","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[-64,64],"credentials":{"httpHeaderAuth":{"id":"AQrZ1kbx5Eeca1ro","name":"Wanderer Spot Access Token"}}},{"parameters":{"url":"https://hacker-news.firebaseio.com/v0/newstories.json","options":{}},"id":"92b289a0-78f2-4ba8-a756-25c5d462c166","name":"HackerNews Story IDs","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[-64,272]},{"parameters":{"jsCode":"// Process NewsAPI articles\nconst newsApiData = $input.first()?.json?.articles || [];\nconst hackerNewsIds = $input.last()?.json || [];\n\n// Filter and process NewsAPI articles\nconst processedNewsApi = newsApiData\n  .filter(article => {\n    const title = article.title?.toLowerCase() || '';\n    const description = article.description?.toLowerCase() || '';\n    const content = article.content?.toLowerCase() || '';\n    \n    // AI-related keywords for better filtering\n    const aiKeywords = [\n      'artificial intelligence', 'machine learning', 'neural network',\n      'deep learning', 'openai', 'chatgpt', 'gpt', 'llm', 'ai model',\n      'generative ai', 'transformer', 'nlp', 'computer vision',\n      'reinforcement learning', 'ai research', 'ai breakthrough',\n      'ai startup', 'ai company', 'ai technology', 'ai ethics'\n    ];\n    \n    return aiKeywords.some(keyword => \n      title.includes(keyword) || \n      description.includes(keyword) || \n      content.includes(keyword)\n    );\n  })\n  .map(article => ({\n    title: article.title,\n    description: article.description,\n    url: article.url,\n    source: article.source?.name || 'Unknown',\n    publishedAt: article.publishedAt,\n    category: 'News',\n    relevanceScore: calculateRelevanceScore(article),\n    extractedAt: new Date().toISOString()\n  }));\n\n// Function to calculate relevance score\nfunction calculateRelevanceScore(article) {\n  let score = 0;\n  const text = `${article.title} ${article.description} ${article.content}`.toLowerCase();\n  \n  const highValueKeywords = ['breakthrough', 'launch', 'release', 'funding', 'acquisition'];\n  const aiCompanies = ['openai', 'google', 'microsoft', 'meta', 'anthropic', 'nvidia'];\n  \n  highValueKeywords.forEach(keyword => {\n    if (text.includes(keyword)) score += 3;\n  });\n  \n  aiCompanies.forEach(company => {\n    if (text.includes(company)) score += 2;\n  });\n  \n  return score;\n}\n\n// Prepare HackerNews IDs for batch processing (take top 20)\nconst topHackerNewsIds = hackerNewsIds.slice(0, 20);\n\nreturn [\n  ...processedNewsApi.map(item => ({ json: item })),\n  { json: { hackerNewsIds: topHackerNewsIds } }\n];"},"id":"dfd2b70d-f5ec-4bcd-9df1-3429e49ccf79","name":"Process News Data","type":"n8n-nodes-base.code","typeVersion":2,"position":[144,176]},{"parameters":{"batchSize":5,"options":{}},"id":"46688139-6f2c-47ec-8f15-873e79ca1fdc","name":"Split HackerNews IDs","type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[336,272]},{"parameters":{"jsCode":"// Get current batch of HackerNews story IDs\nconst hackerNewsIds = $input.first().json.hackerNewsIds;\nconst batchInfo = $input.last().json;\n\n// Calculate which IDs to process in this batch\nconst startIndex = (batchInfo.batchIndex - 1) * 5;\nconst endIndex = startIndex + 5;\nconst currentBatch = hackerNewsIds.slice(startIndex, endIndex);\n\nreturn currentBatch.map(id => ({ json: { storyId: id } }));"},"id":"9e87e70d-ad3f-438c-bf15-e68493966d2b","name":"Prepare HackerNews Batch","type":"n8n-nodes-base.code","typeVersion":2,"position":[544,272]},{"parameters":{"url":"=https://hacker-news.firebaseio.com/v0/item/{{ $json.storyId }}.json","options":{}},"id":"af23bc55-b140-4286-8024-cfff6781f129","name":"Fetch HackerNews Story","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[736,272]},{"parameters":{"jsCode":"// Process HackerNews stories and filter for AI content\nconst items = $input.all();\nconst processedStories = [];\n\nfor (const item of items) {\n  const story = item.json;\n  \n  if (!story.title || !story.url) continue;\n  \n  const title = story.title.toLowerCase();\n  const text = (story.text || '').toLowerCase();\n  \n  // AI-related keywords for HackerNews filtering\n  const aiKeywords = [\n    'artificial intelligence', 'machine learning', 'ai', 'ml',\n    'neural network', 'deep learning', 'openai', 'chatgpt',\n    'gpt', 'llm', 'transformer', 'nlp', 'computer vision'\n  ];\n  \n  const isAiRelated = aiKeywords.some(keyword => \n    title.includes(keyword) || text.includes(keyword)\n  );\n  \n  if (isAiRelated) {\n    processedStories.push({\n      title: story.title,\n      description: story.text || 'No description available',\n      url: story.url,\n      source: 'Hacker News',\n      publishedAt: new Date(story.time * 1000).toISOString(),\n      category: 'Discussion',\n      relevanceScore: story.score || 0,\n      extractedAt: new Date().toISOString(),\n      comments: story.descendants || 0\n    });\n  }\n}\n\nreturn processedStories.map(story => ({ json: story }));"},"id":"77a2936d-79c5-4363-a7ca-b935dbc4d215","name":"Filter HackerNews AI Content","type":"n8n-nodes-base.code","typeVersion":2,"position":[944,272]},{"parameters":{"url":"https://api.reddit.com/r/MachineLearning+artificial+OpenAI+ChatGPT/hot.json","sendQuery":true,"queryParameters":{"parameters":[{"name":"limit","value":"25"}]},"options":{}},"id":"1b087aca-0fff-410c-9358-1934faa1ff49","name":"Reddit AI Source","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[-64,464]},{"parameters":{"jsCode":"// Process Reddit posts\nconst redditData = $input.first()?.json?.data?.children || [];\n\nconst processedReddit = redditData\n  .filter(post => {\n    const data = post.data;\n    // Filter out removed/deleted posts and focus on high-quality content\n    return data.title && \n           data.url && \n           !data.removed_by_category &&\n           data.score > 10; // Minimum score threshold\n  })\n  .map(post => {\n    const data = post.data;\n    return {\n      title: data.title,\n      description: data.selftext || data.title,\n      url: data.url.startsWith('/r/') ? `https://reddit.com${data.url}` : data.url,\n      source: `Reddit - r/${data.subreddit}`,\n      publishedAt: new Date(data.created_utc * 1000).toISOString(),\n      category: 'Discussion',\n      relevanceScore: data.score,\n      extractedAt: new Date().toISOString(),\n      comments: data.num_comments\n    };\n  });\n\nreturn processedReddit.map(item => ({ json: item }));"},"id":"7fdb50b0-3a62-4028-81e8-3dd9b8917fa0","name":"Process Reddit Data","type":"n8n-nodes-base.code","typeVersion":2,"position":[144,464]},{"parameters":{},"id":"d7113284-082e-4082-8b4d-8dd12fa624b4","name":"Merge All Sources","type":"n8n-nodes-base.merge","typeVersion":2.1,"position":[1136,368]},{"parameters":{"jsCode":"// Combine and deduplicate all news sources\nconst allItems = $input.all();\nconst combinedNews = [];\nconst seenUrls = new Set();\n\n// Process all items and remove duplicates\nfor (const item of allItems) {\n  const newsItem = item.json;\n  \n  // Skip if we've already seen this URL\n  if (seenUrls.has(newsItem.url)) {\n    continue;\n  }\n  \n  seenUrls.add(newsItem.url);\n  combinedNews.push(newsItem);\n}\n\n// Sort by relevance score (descending) and then by publish date (newest first)\ncombinedNews.sort((a, b) => {\n  if (b.relevanceScore !== a.relevanceScore) {\n    return b.relevanceScore - a.relevanceScore;\n  }\n  return new Date(b.publishedAt) - new Date(a.publishedAt);\n});\n\n// Take top 50 most relevant articles\nconst topArticles = combinedNews.slice(0, 50);\n\n// Add ranking and summary\nconst finalResults = topArticles.map((item, index) => ({\n  rank: index + 1,\n  title: item.title,\n  description: item.description?.substring(0, 300) + (item.description?.length > 300 ? '...' : ''),\n  url: item.url,\n  source: item.source,\n  publishedAt: item.publishedAt,\n  category: item.category,\n  relevanceScore: item.relevanceScore,\n  extractedAt: item.extractedAt,\n  comments: item.comments || 0,\n  // Add formatted date for Google Sheets\n  formattedDate: new Date(item.publishedAt).toLocaleDateString(),\n  formattedTime: new Date(item.publishedAt).toLocaleTimeString()\n}));\n\nconsole.log(`Processed ${finalResults.length} unique AI news articles`);\n\nreturn finalResults.map(item => ({ json: item }));"},"id":"2b198588-2407-4d09-acad-a3c9d54e5fff","name":"Deduplicate and Rank","type":"n8n-nodes-base.code","typeVersion":2,"position":[1344,368]},{"parameters":{"operation":"appendOrUpdate","documentId":{"__rl":true,"value":"YOUR_GOOGLE_SHEET_ID","mode":"list","cachedResultName":"AI News Research Sheet"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"Sheet1"},"options":{}},"id":"bbde8e3a-c395-405b-afc6-8e2f087e2ba0","name":"Add to Google Sheet","type":"n8n-nodes-base.googleSheets","typeVersion":4.2,"position":[1536,368]},{"parameters":{"jsCode":"// Generate summary report\nconst items = $input.all();\nconst totalArticles = items.length;\nconst sources = [...new Set(items.map(item => item.json.source))];\nconst categories = [...new Set(items.map(item => item.json.category))];\n\nconst report = {\n  timestamp: new Date().toISOString(),\n  totalArticles: totalArticles,\n  sources: sources,\n  categories: categories,\n  topArticles: items.slice(0, 5).map(item => ({\n    title: item.json.title,\n    source: item.json.source,\n    relevanceScore: item.json.relevanceScore\n  }))\n};\n\nconsole.log('AI News Research Summary:', JSON.stringify(report, null, 2));\n\nreturn [{ json: report }];"},"id":"8358e863-ca15-49f4-85ac-6a7905c94e74","name":"Generate Summary","type":"n8n-nodes-base.code","typeVersion":2,"position":[1744,368]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict"},"conditions":[{"id":"error-condition","leftValue":"={{ $json.error }}","rightValue":"","operator":{"type":"string","operation":"notEmpty"}}],"combinator":"and"},"options":{}},"id":"c9fae167-2e6c-44f0-ba87-2f5b21fe0460","name":"Error Handler","type":"n8n-nodes-base.if","typeVersion":2,"position":[1536,576]},{"parameters":{"text":"ü§ñ AI News Research Agent completed successfully!\n\nüìä Summary:\n‚Ä¢ Total articles processed: {{ $json.totalArticles }}\n‚Ä¢ Sources: {{ $json.sources.join(', ') }}\n‚Ä¢ Categories: {{ $json.categories.join(', ') }}\n\nüîù Top 3 Articles:\n{% for article in $json.topArticles.slice(0, 3) %}\n‚Ä¢ {{ article.title }} ({{ article.source }}) - Score: {{ article.relevanceScore }}\n{% endfor %}\n\nüìã Full results added to Google Sheet: [View Sheet](https://docs.google.com/spreadsheets/d/YOUR_GOOGLE_SHEET_ID)","otherOptions":{}},"id":"bbc94291-3ca8-49d0-863b-c34e13c776a5","name":"Slack Notification","type":"n8n-nodes-base.slack","typeVersion":2.1,"position":[1936,368],"webhookId":"afe585b2-d95a-4337-a690-c10a1a5dad0f"}],"connections":{"Schedule Trigger":{"main":[[{"node":"NewsAPI Source","type":"main","index":0},{"node":"HackerNews Story IDs","type":"main","index":0},{"node":"Reddit AI Source","type":"main","index":0}]]},"NewsAPI Source":{"main":[[{"node":"Process News Data","type":"main","index":0}]]},"Process News Data":{"main":[[{"node":"Merge All Sources","type":"main","index":0},{"node":"Split HackerNews IDs","type":"main","index":0}]]},"Split HackerNews IDs":{"main":[[{"node":"Prepare HackerNews Batch","type":"main","index":0}]]},"Prepare HackerNews Batch":{"main":[[{"node":"Fetch HackerNews Story","type":"main","index":0}]]},"Fetch HackerNews Story":{"main":[[{"node":"Filter HackerNews AI Content","type":"main","index":0}]]},"Filter HackerNews AI Content":{"main":[[{"node":"Merge All Sources","type":"main","index":1}]]},"Reddit AI Source":{"main":[[{"node":"Process Reddit Data","type":"main","index":0}]]},"Merge All Sources":{"main":[[{"node":"Deduplicate and Rank","type":"main","index":0}]]},"Deduplicate and Rank":{"main":[[{"node":"Add to Google Sheet","type":"main","index":0},{"node":"Generate Summary","type":"main","index":0}]]},"Add to Google Sheet":{"main":[[{"node":"Error Handler","type":"main","index":0}]]},"Generate Summary":{"main":[[{"node":"Slack Notification","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"0cccaab9-aa7f-4402-bea5-c87b6437f60f","activeVersionId":null,"triggerCount":0,"shared":[{"updatedAt":"2025-09-18T15:12:25.981Z","createdAt":"2025-09-18T15:12:25.981Z","role":"workflow:owner","workflowId":"zv4XJ5CIvMH8G5bV","projectId":"iOyc3VpWKvgHH9fv"}],"activeVersion":null,"tags":[]}